;-----------------------------------------------------------------------;
;									;
; Experimental invulnerability fix by Decane! Inluded since SRP v1.0.2. ;
;									;
;-----------------------------------------------------------------------;

[logic]
active					= walker
;on_death				= death
level_spot				= mechanic

[remark@enemy]
out_restr				= agr_stalker_mechanic_restr
path_walk				= agr_stalker_trader_walk
path_look				= agr_stalker_trader_look
anim					= hands_up
target					= actor
meet					= no_meet
on_info					= {!gulag_enemy_actor(agr_smart_terrain_4_4)=smart_captured_by_faction(agr_smart_terrain_4_4:stalker)} walker
combat_ignore_cond			= true
combat_ignore_keep_when_attacked	= true

[remark@invul_enemy]
invulnerable				= true
out_restr				= agr_stalker_mechanic_restr
path_walk				= agr_stalker_trader_walk
path_look				= agr_stalker_trader_look
anim					= hands_up
target					= actor
meet					= no_meet
on_info					= {=gulag_enemy_actor(agr_smart_terrain_4_4)} remark@enemy
on_info2				= {!is_smart_in_combat(agr_smart_terrain_4_4)} walker
combat_ignore_cond			= true
combat_ignore_keep_when_attacked	= true

[walker]
invulnerable				= true
path_walk				= agr_stalker_mechanic_walk
path_look				= agr_stalker_mechanic_look
on_info					= {=gulag_enemy_actor(agr_smart_terrain_4_4)} remark@enemy
on_info2				= {=is_smart_in_combat(agr_smart_terrain_4_4)} remark@invul_enemy
out_restr				= agr_stalker_mechanic_restr
combat_ignore_cond			= true

;[death]
;on_info				= %+agr_stalker_mechanic_dead%
