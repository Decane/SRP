[list_tm_military]
mil_blockpost
mil_hires
mil_kill_bloodsucker
mil_reach_tower_task
mil_talk_2_forester2
mil_talk_2_merc_2_task
mil_talk_2_fr_com
mil_destroy_all_military
mil_transfer_coo
mil_actor_attack_house
mil_contact_with_clear_sky_commander
mil_defend_barrier
mil_additional_quest_1
mil_additional_quest_2
mil_additional_quest_3
mil_additional_quest_4
mil_additional_quest_5

[mil_blockpost]
type = storyline
task_type = storyline
;icon = ui_mt_image_defend_tower
name = mil_blockpost_task
text = mil_blockpost_text
target_story_ids = 1218
condlist_0 = {+mil_actor_bridge} complete
condlist_1 = {+mil_freedom_speaker_death} fail
condlist_2 = {+mil_actor_inside_wtower} reversed, {=is_squad_enemy_to_actor(mil_smart_terrain_2_2_freedom_squad_1)} reversed, {+mil_merc_talked} reversed
prior = 10
auto_faction = false
;on_reversed = %+mil_actor_bridge%
;on_fail = %+mil_actor_bridge%

[mil_hires]
type = storyline
task_type = storyline
;icon = ui_mt_image_defend_tower
name = mil_hires
text = mil_hires_text
target_story_ids = 1207
condlist_0 = {+mil_merc_talked} complete
condlist_1 = {+mil_hog_death} fail
condlist_2 = {+mil_actor_inside_wtower} reversed, {=is_squad_enemy_to_actor(mil_killer_invaders)} reversed
;on_complete = %+mil_reach_merc_done%
;on_reversed = %+mil_reach_merc_done%
;on_fail = %+mil_reach_merc_done%
prior = 10
auto_faction = false

[mil_kill_bloodsucker]
type = eliminate_smart
task_type = additional
auto_name = false
;icon = ui_mt_image_defend_tower
name = mil_kill_bs
text = mil_kill_bs_text
prior = 25
wait_time = -1
target_cond = {=target_smart_name(mil_smart_terrain_4_3)} true
condlist_0 = {+mil_bs_dead} complete
condlist_1 = {+mil_actor_inside_wtower} reversed
on_complete = %+mil_free_2_tower =play_sound(mil_bs_dead)%
community_relation_delta_fail=-150
community_relation_delta_complete=+150
play_regard = nil
auto_faction = false

[mil_reach_tower_task]
type = storyline
task_type = storyline
;icon = ui_mt_image_defend_tower
name = mil_reach_tower_task
text = mil_reach_tower_task_text
target_story_ids = 1209
condlist_0 = {+mil_actor_inside_wtower} complete
auto_faction = false

[mil_talk_2_forester2]
type = storyline
task_type = storyline
;icon = ui_mt_image_defend_tower
name = mil_talk_2_forester2
text = mil_talk_2_forester2_text
target_story_ids = 515
condlist_0 = {+forester_talked_2} complete
auto_faction = false

[mil_talk_2_merc_2_task]
type = storyline
task_type = storyline
;icon = ui_mt_image_defend_tower
name = mil_talk_2_merc_2_task
text = mil_talk_2_merc_2_task_text
target_story_ids = 1207
condlist_0 = {+mil_merc_talked_f1_f2_wt1} complete
condlist_1 = {+mil_hog_death} fail
condlist_2 = {=is_squad_enemy_to_actor(mil_killer_invaders)} reversed
auto_faction = false

[mil_talk_2_fr_com]
type = storyline
task_type = storyline
;icon = ui_mt_image_attack_tower
name = mil_talk_2_fr_com
text = mil_talk_2_fr_com_text
target_story_ids = 1211
condlist_0 = {+mil_actor_attack_house} complete
condlist_1 = {=is_squad_enemy_to_actor(mil_freedom_attack_base_1)} reversed
auto_faction = false

[mil_actor_attack_house]
type = storyline
task_type = storyline
;icon = ui_mt_image_attack_tower
name = mil_actor_attack_house
text = mil_actor_attack_house_text
target_story_ids = 1217
condlist_0 = {+mil_militarybase_dead_1 +mil_militarybase_dead_2} complete
on_complete = %+mil_destroy_house_military%
on_reversed = %+mil_destroy_house_military%
community_relation_delta_fail=-300
community_relation_delta_complete=+300
auto_faction = false

[mil_destroy_all_military]
type = eliminate_smart
task_type = storyline
auto_name = false
;icon = ui_mt_image_attack_tower
name = mil_elim_military
text = mil_elim_military_text
prior = 25
target_cond = {=target_smart_name(mil_smart_terrain_7_7)} true
condlist_1 = {=is_squad_enemy_to_actor(mil_freedom_attack_base_1)} reversed
wait_time = -1
on_complete = %+mil_mil_eliminated%
on_reversed = %+mil_mil_eliminated%
community_relation_delta_fail=-200
community_relation_delta_complete=+200
play_regard = nil
auto_faction = false

[mil_transfer_coo]
type = storyline
task_type = storyline
;icon = ui_mt_image_attack_tower
name = mil_transfer_coo
text = mil_transfer_coo_text
target_story_ids = 1215
condlist_0 = {+mil_actor_go_to_limansk} complete
on_complete = %+red_bridge_scene_begin%
auto_faction = false

[mil_contact_with_clear_sky_commander]
type = storyline
task_type = storyline
;icon = ui_mt_image_attack_tower
prior = 11
name = mil_contact_with_clear_sky_commander_descr
text = mil_contact_with_clear_sky_commander_name
target_story_ids = 501
condlist_0 = {+red_bridge_actor_talk_with_cs_commander} complete
condlist_1 = {+red_bridge_actor_in_position} reversed
auto_faction = false

; Other

[mil_defend_barrier]
type = defend_smart
task_type = additional
auto_name = false
target_cond = {=target_smart_name(mil_smart_terrain_3_8)} true
name = mil_defend_barrier_name
text = mil_defend_barrier_text
prior = 9
reward_money = 1000
wait_time = 0
community_relation_delta_fail=-200
community_relation_delta_complete=+200
auto_faction = false

; Additional quests

[mil_additional_quest_1]
type = recover_item
task_type = additional
name = mil_additional_quest_1_name
text = mil_additional_quest_1_text
target_cond = {-mil_additional_quest_1_info_complete =actor_on_level(military)} true
prior = 2
target_npc_or_box_name = mil_additional_quest_1_box
wait_time = -1
immediate_reward = true
reward_money = 2000
requested_items = mil_quest_ammo_gauss
on_complete = %+mil_additional_quest_1_info_complete%
on_reversed = %+mil_additional_quest_1_info_complete%
on_fail = %+mil_additional_quest_1_info_complete%
community_relation_delta_fail=-100
community_relation_delta_complete=+100
auto_faction = true

[mil_additional_quest_2]
type = recover_item
task_type = additional
name = mil_additional_quest_2_name
text = mil_additional_quest_2_text
target_cond = {-mil_additional_quest_2_info_complete =actor_on_level(military)} true
prior = 2
target_npc_or_box_name = mil_additional_quest_2_commander
wait_time = -1
immediate_reward = true
reward_money = 3000
requested_items = mil_device_pda_lost_squard
;on_complete = %+mil_additional_quest_2_info_complete%
on_init = %+mil_additional_quest_2_info_complete%
community_relation_delta_fail=-100
community_relation_delta_complete=+100
auto_faction = true

[mil_additional_quest_3]
type = recover_item
task_type = additional
name = mil_additional_quest_3_name
text = mil_additional_quest_3_text
target_cond = {-mil_additional_quest_3_info_complete =actor_on_level(military)} true
prior = 2
target_npc_or_box_name = mil_additional_quest_3_soldier_1, mil_additional_quest_3_soldier_2, mil_additional_quest_3_soldier_3, mil_additional_quest_3_soldier_4
wait_time = -1
immediate_reward = true
reward_money = 2000
requested_items = mil_quest_ammo_7.62x54_7h14
;on_complete = %+mil_additional_quest_3_info_complete%
on_init = %+mil_additional_quest_3_info_complete%
community_relation_delta_fail=-100
community_relation_delta_complete=+100
auto_faction = true

[mil_additional_quest_4]
type = recover_item
task_type = additional
name = mil_additional_quest_4_name
text = mil_additional_quest_4_text
target_cond = {-mil_additional_quest_4_info_complete =actor_on_level(military)} true
prior = 2
target_npc_or_box_name = mil_additional_quest_4_lost_soldier
wait_time = -1
immediate_reward = true
reward_money = 4000
requested_items = mil_quest_af_mincer_meat
;on_init = %+mil_additional_quest_4_spawn%
;on_complete = %+mil_additional_quest_4_info_complete%
on_init = %+mil_additional_quest_4_info_complete +mil_additional_quest_4_spawn%
community_relation_delta_fail=-100
community_relation_delta_complete=+100
auto_faction = true

[mil_additional_quest_5]
type = recover_item
task_type = additional
name = mil_additional_quest_5_name
text = mil_additional_quest_5_text
target_cond = {-mil_additional_quest_5_info_complete =actor_on_level(military)} true
prior = 2
target_npc_or_box_name = mil_additional_quest_5_soldier
wait_time = -1
immediate_reward = true
reward_item = wpn_g36:ammo_5.56x45_ap:ammo_5.56x45_ap
requested_items = mil_quest_af_flame
;on_complete = %+mil_additional_quest_5_info_complete%
on_init = %+mil_additional_quest_5_info_complete%
community_relation_delta_fail=-100
community_relation_delta_complete=+100
auto_faction = true

; Bring items

;[mil_bring_item_1]
;auto_name = false
;type = bring_item
;task_type = additional
;name = mil_bring_item_1_name
;text = mil_bring_item_1_text
;target_cond = {~20 =actor_on_level(military)} true
;prior = 2
;faction = freedom
;requested_items = wpn_val, ammo_9x39_ap
;community_relation_delta_complete = 100
;reward_money = {~50} 1500, {~50}, 2000, 1000

;[mil_bring_item_2]
;auto_name = false
;type = bring_item
;task_type = additional
;name = mil_bring_item_2_name
;text = mil_bring_item_2_text
;target_cond = {~20 =actor_on_level(military)} true
;prior = 2
;faction = freedom
;requested_items = medkit_army, medkit_army, medkit_army
;community_relation_delta_complete = 100
;reward_money = {~50} 1500, {~50}, 2000, 1000

;[mil_bring_item_3]
;auto_name = false
;type = bring_item
;task_type = additional
;name = mil_bring_item_3_name
;text = mil_bring_item_3_text
;target_cond = {~20 =actor_on_level(military)} true
;prior = 2
;faction = freedom
;requested_items = wpn_lr300, ammo_m209
;community_relation_delta_complete = 100
;reward_money = {~50} 1500, {~50}, 2000, 1000

;[mil_bring_item_4]
;auto_name = false
;type = bring_item
;task_type = additional
;name = mil_bring_item_4_name
;text = mil_bring_item_4_text
;target_cond = {~20 =actor_on_level(military)} true
;prior = 2
;faction = stalker
;requested_items = medkit_scientic, medkit_scientic
;community_relation_delta_complete = 100
;reward_money = 1000

;[mil_bring_item_5]
;auto_name = false
;type = bring_item
;task_type = additional
;name = mil_bring_item_5_name
;text = mil_bring_item_5_text
;target_cond = {~20 =actor_on_level(military)} true
;prior = 2
;faction = stalker
;requested_items = detector_elite
;community_relation_delta_complete = 100
;reward_money = {~50} 750, {~50}, 1200, 1000

;[mil_bring_item_6]
;auto_name = false
;type = bring_item
;task_type = additional
;name = mil_bring_item_6_name
;text = mil_bring_item_6_text
;target_cond = {~20 =actor_on_level(military)} true
;prior = 2
;faction = stalker
;requested_items = wpn_vintorez, ammo_9x39_ap, ammo_9x39_ap
;community_relation_delta_complete = 100
;reward_money = {~50} 1500, {~50}, 2500, 2000

;[mil_bring_item_7]
;auto_name = false
;type = bring_item
;task_type = additional
;name = mil_bring_item_7_name
;text = mil_bring_item_7_text
;target_cond = {~20 =actor_on_level(military)} true
;prior = 2
;faction = dolg
;requested_items = wpn_groza
;community_relation_delta_complete = 100
;reward_money = {~50} 1500, {~50}, 2500, 2000

;[mil_bring_item_8]
;auto_name = false
;type = bring_item
;task_type = additional
;name = mil_bring_item_8_name
;text = mil_bring_item_8_text
;target_cond = {~20 =actor_on_level(military)} true
;prior = 2
;faction = dolg
;requested_items = wpn_pkm
;community_relation_delta_complete = 100
;reward_money = {~50} 4000, {~50}, 5000, 4500

;[mil_bring_item_9]
;auto_name = false
;type = bring_item
;task_type = additional
;name = mil_bring_item_9_name
;text = mil_bring_item_9_text
;target_cond = {~20 =actor_on_level(military)} true
;prior = 2
;faction = dolg
;requested_items = wpn_rpg7
;community_relation_delta_complete = 100
;reward_money = {~50} 3500, {~50}, 2500, 3000

;[mil_bring_item_10]
;auto_name = false
;type = bring_item
;task_type = additional
;name = mil_bring_item_10_name
;text = mil_bring_item_10_text
;target_cond = {~20 =actor_on_level(military)} true
;prior = 2
;faction = bandit
;requested_items = vodka, vodka, vodka, vodka, vodka, vodka, vodka, vodka, vodka, vodka
;community_relation_delta_complete = 100
;reward_money = 500

;[mil_bring_item_11]
;auto_name = false
;type = bring_item
;task_type = additional
;name = mil_bring_item_11_name
;text = mil_bring_item_11_text
;target_cond = {~20 =actor_on_level(military)} true
;prior = 2
;faction = bandit
;requested_items = wpn_spas12, ammo_12x76_dart, ammo_12x76_dart
;community_relation_delta_complete = 100
;reward_money = {~50} 1000, {~50}, 2000, 1500

;[mil_bring_item_12]
;auto_name = false
;type = bring_item
;task_type = additional
;name = mil_bring_item_12_name
;text = mil_bring_item_12_text
;target_cond = {~20 =actor_on_level(military)} true
;prior = 2
;faction = bandit
;requested_items = wpn_desert_eagle, ammo_11.43x23_hydro
;community_relation_delta_complete = 100
;reward_money = {~50} 500, {~50}, 1000, 750